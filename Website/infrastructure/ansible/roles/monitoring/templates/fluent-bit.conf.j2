[SERVICE]
    Flush        5
    Daemon       Off
    Log_Level    info
    Parsers_File parsers.conf

[INPUT]
    Name        tail
    Path        /var/log/syslog
    Tag         syslog

[INPUT]
    Name        tail
    Path        /var/log/auth.log
    Tag         auth

[INPUT]
    Name        tail
    Path        /var/log/docker/containers/*/*.log
    Tag         docker
    Parser      docker

[FILTER]
    Name        kubernetes
    Match       kube.*
    Kube_URL    https://kubernetes.default.svc:443
    Kube_CA_File    /var/run/secrets/kubernetes.io/serviceaccount/ca.crt
    Kube_Token_File /var/run/secrets/kubernetes.io/serviceaccount/token

[OUTPUT]
    Name        cloudwatch
    Match       *
    region      {{ aws_region }}
    log_group_name      /{{ project_name }}/{{ environment }}/fluent-bit
    log_stream_prefix  ${HOSTNAME}-
    auto_create_group  true